(this.webpackJsonpreactapptestausa=this.webpackJsonpreactapptestausa||[]).push([[0],{246:function(e,t,n){e.exports=n(289)},251:function(e,t,n){},257:function(e,t){},258:function(e,t){},266:function(e,t){},276:function(e,t){},277:function(e,t){},278:function(e,t){},279:function(e,t){},287:function(e,t){},288:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var r=n(63),a=n.n(r),o=n(221),c=n.n(o),i=(n(251),n(5)),u=n.n(i),s=n(11),l=n(90),f=n(244),d=n.n(f),h=(n(288),n(4)),g={1:{name:"person",color:"red"},2:{name:"ThumbsDown",color:"yellow"},3:{name:"ThankYou",color:"lime"},4:{name:"LiveLong",color:"blue"}},m=function(e,t,n,r,a,o,c){for(var i=0;i<=e.length;i++)if(e[i]&&t[i]&&n[i]>r){var u=Object(h.a)(e[i],4),s=u[0],l=u[1],f=u[2],d=u[3],m=t[i];c.strokeStyle=g[m].color,c.lineWidth=5,c.fillStyle="white",c.font="30px Arial",c.beginPath(),c.fillText(g[m].name+" - "+Math.round(100*n[i])/100,l*a,s*o-10),c.rect(l*a,s*o,d*a/2,f*o/2),c.stroke()}};var p=function(){var e,t,n,o,c,i=Object(r.useRef)(null),f=Object(r.useRef)(null),h=!1,g=(new Image,function(){var t=Object(s.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.d("https://testtfodausa.s3.eu-de.cloud-object-storage.appdomain.cloud/model.json");case 2:n=t.sent,setInterval((function(){v(n)}),16.7),e||(console.log(e),e=setInterval((function(){p()}),5e3),console.log(e));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());function p(){if(h){var e=document.createElement("canvas");console.log("undefined");var r=e.getContext("2d"),a=new Image;a.onload=function(){r.drawImage(a,0,0,640,480,0,0,640,480)},console.log("funzione",void 0,t,n,o,c),a.src=void 0,console.log("funzione",typeof a.src),e.toDataURL("image/jpeg"),console.log("funzione",a.src),h=!1}}var v=function(){var e=Object(s.a)(u.a.mark((function e(r){var a,s,d,g,p,v,b,x,w,y,E,j,k;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof i.current||null===i.current||4!==i.current.video.readyState){e.next=35;break}return a=i.current.video,s=i.current.video.videoWidth,d=i.current.video.videoHeight,i.current.video.width=s,i.current.video.height=d,f.current.width=s,f.current.height=d,g=l.a.fromPixels(a),p=l.c.resizeBilinear(g,[640,480]),v=p.cast("int32"),b=v.expandDims(0),e.next=14,r.executeAsync(b);case 14:return x=e.sent,e.next=17,x[1].array();case 17:return w=e.sent,e.next=20,x[0].array();case 20:return y=e.sent,e.next=23,x[4].array();case 23:return E=e.sent,j=f.current.getContext("2d"),e.next=27,i.current.getScreenshot();case 27:k=e.sent,E[0][0]>.7&&(h=!0,console.log(typeof k),t=w[0][0][0],n=w[0][0][1],o=w[0][0][2]-w[0][0][0],c=w[0][0][3]-w[0][0][1],console.log("webcam aggiornata")),requestAnimationFrame((function(){m(w[0],y[0],E[0],.7,s,d,j)})),l.b(g),l.b(p),l.b(v),l.b(b),l.b(x);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g()}),[]),a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(d.a,{ref:i,id:"webcam",muted:!0,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}}),a.a.createElement("canvas",{ref:f,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:8,width:640,height:480}}),a.a.createElement("img",{id:"screenshot",alt:"Screenshot",style:{width:680,height:480}})))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(p,null)),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.50ab4422.chunk.js.map